<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="'layout/LayoutPadrao'">
	
<head>

	<title>Cadastro do Imóvel</title>
	
	<link rel="stylesheet" th:href="@{/Stylesheets/vendors/upload.min.css}"/>

</head>

<body>
	
<section layout:fragment="conteudo">

		<div class="page-header">
			<div class="container-fluid">
				<h1>
					Cadastro do Imóvel
				</h1>
			</div>
		</div>

		<div class="container-fluid">

			<!-- <div class="alert  alert-danger  alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<i class="fa  fa-exclamation-circle"></i> Já existe um produto com o nome informado.
			</div> -->

			<form method="POST" th:object="${imovel}" class="form-vertical  js-form-loading">
			
				<th:block th:include="fragments/MensagemSucesso"></th:block> 		<!-- Mensagem de sucesso -->
				<th:block th:include="fragments/MensagensErroValidacao"></th:block> <!-- Mensagem de validacao -->
		
			<h4>Atributos do imóvel</h4>
		
			<div  class="well well-small">
			
				<div class="row">
									
					<div class="col-sm-2  form-group" th:classappend="${#fields.hasErrors('codigosc')} ? has-error">
						<label for="codigosc" class="control-label">Código SC</label>
						<div class="input-group">
							<div class="input-group-addon">sc</div>
							<input id="codigosc" type="text" class="form-control js-inteiro" th:field="*{codigosc}"/>
						</div>
					</div>
					
					<div class="col-sm-2  form-group" th:classappend="${#fields.hasErrors('tipoImovel')} ? has-error">
						<label for="tipo_imovel" class="control-label">Tipo do imóvel</label>
						<select id="tipo_imovel" class="form-control" th:field="*{tipoImovel}">
							<option th:each="tipoImovel : ${tipoImoveis}" th:value="${tipoImovel}" th:text="${tipoImovel.enum_tipoImovel}"></option>
						</select>
					</div>
					
					<div class="col-sm-2  form-group" th:classappend="${#fields.hasErrors('classificacao')} ? has-error">
						<label for="classificacao" class="control-label">Classificacao</label>
						<select id="classificacao" class="form-control" th:field="*{classificacao}">
							<option th:each="classificacao : ${classificacoes}" th:value="${classificacao}" th:text="${classificacao.enum_classificacao}"></option>
						</select>
					</div>
					
				</div>
	
				<div class="row">
				
					<div class= "col-sm-2 form-group" th:classappend="${#fields.hasErrors('matricula')} ? has-error">
						<label for="matricula" class="control-label">Matrícula</label>
						<input id="matricula" type="text" class="form-control js-inteiro" th:field="*{matricula}"></input>
					</div>
					
					<div class= "col-sm-2 form-group" th:classappend="${#fields.hasErrors('inscricaoImobiliaria')} ? has-error">
						<label for="inscricao" class="control-label">Inscrição imobiliária</label>
						<input id="inscricao" type="text" class="form-control js-inteiro" th:field="*{inscricaoImobiliaria}"></input>
					</div>
				
					<div class= "col-sm-2 form-group">
						<label for="data_captacao">Data de Captação</label>
						<input id="data_captacao" type="text" class="form-control"></input>
					</div>
					
				</div>	
				
				<div class="row">
				
					<div class= "col-sm-2 form-group" th:classappend="${#fields.hasErrors('idadeImovel')} ? has-error">
						<label for="idade_imovel" class="control-label">idade do imóvel</label>
						<div class="input-group">
							<input id="idade_imovel" type="text" class="form-control js-inteiro" th:field="*{idadeImovel}"></input>
							<div class="input-group-addon">anos</div>
						</div>
					</div>
					
					<div class="col-sm-2  form-group" th:classappend="${#fields.hasErrors('destinacao')} ? has-error">
						<label for="destinacao" class="destinacao">Destinação</label>
						<select id="destinacao" class="form-control" th:field="*{destinacao}">
							<option th:each="destinacao : ${destinacoes}" th:value="${destinacao}" th:text="${destinacao.getEnum_destinacao()}"></option>
						</select>
					</div>
					
					<div class= "col-sm-2 form-group" th:classappend="${#fields.hasErrors('areaTotal')} ? has-error">
						<label for="area_total" class="control-label">Área total</label>
						<div class="input-group">
							<input id="area_total" type="text" class="form-control js-decimal" th:field="*{areaTotal}"></input>
							<div class="input-group-addon">M²</div>
						</div>
					</div>
				
				</div>	
				
				<div class="row">
				
					<div class="col-sm-2  form-group" th:classappend="${#fields.hasErrors('situacao')} ? has-error">
						<label for="situacao" class="control-label">Situação</label>
						<select id="situacao" class="form-control" th:field="*{situacao}">
							<option th:each="situacao : ${situacoes}" th:value="${situacao}" th:text="${situacao.getEnum_situacao()}"></option>
						</select>
					</div>
					
					<div class="col-sm-2  form-group" th:classappend="${#fields.hasErrors('conservacao')} ? has-error">
						<label for="conservacao" class="control-label">Conservação</label>
						<select id="conservacao" class="form-control" th:field="*{conservacao}">
							<option th:each="conservacao : ${conservacao}" th:value="${conservacao}" th:text="${conservacao.getEnum_conservacao()}"></option>
						</select>
					</div>
					
					<div class= "col-sm-2 form-group" th:classappend="${#fields.hasErrors('garagem')} ? has-error">
						<label for="garagem" class="control-label">Garagem</label>
						<div class="input-group">
							<input id="garagem" type="text" class="form-control js-inteiro" th:field="*{garagem}"></input>
							<div class="input-group-addon">vagas</div>
						</div>
					</div>	
				</div>	
				
				<br></br>
				
				<div class="row">
				
					<div class="col-lg-2 col-sm-6" th:classappend="${#fields.hasErrors('status_imovel')} ? has-error">
						<label for="status" class="control-label">Status do Imóvel</label>
						<div>
							<th:block th:each="status : ${statusImovel}">
								<div class="radio radio-inline">
									<input th:id="|id_${status}|" type="radio" th:value="${status}" th:field="*{status_imovel}"/> <!-- PIPE para concatenar Strings id+... -->
									<label th:for="|id_${status}|" th:text="${status.getStatus_imovel()}">Ativo</label>
								</div>
							</th:block>
						</div>
					</div>
					
					<div class="col-lg-3 col-sm-6" th:classappend="${#fields.hasErrors('exclusividade_imovel')} ? has-error">
						<label for="status" class="control-label">Exclusividade do Imóvel</label>
						<div>
							<th:block th:each="exclusividade : ${exclusividadeImovel}">
								<div class="radio radio-inline">
									<input th:id="|id_${exclusividade}|" type="radio" th:value="${exclusividade}" th:field="*{exclusividade_imovel}"/> <!-- PIPE para concatenar Strings id+... -->
									<label th:for="|id_${exclusividade}|" th:text="${exclusividade.getImovel_exclusividade()}">Exclusividade</label>
								</div>
							</th:block>
						</div>
					</div>
				
				</div>
				
				<br></br>
				
				<div class="row"> <!-- Grava o IdUsuario na base de dados -->
					<div class="col-lg-6  col-sm-6" th:classappend="${#fields.hasErrors('usuario')} ? has-error">
						<label for="nomecorretor" class="control-label">Nome do corretor responsável</label>
						<select id="nomecorretor" class="form-control" th:field="*{corretor}">
							<option th:each="usuario : ${usuario}" th:value="${usuario.nome}" th:text="${usuario.getNome()}" class="form-control"></option>
						</select>
					</div>
				</div>
				
				<br></br><!-- ESPACAMENTO -->
				
				<div class="row">
					<div class="form-group  col-sm-6">
					
						<input type="hidden" th:field="*{foto}">
						<input type="hidden" th:field="*{contentType}">
						
						<label class="control-label">Foto do imóvel</label>
						<div id="upload-drop" class="sc-upload">
							<i class="glyphicon  glyphicon-cloud-upload"></i>
							<span>Arraste a foto aqui ou </span>
							<a class="sc-upload-form-file">selecione <input id="upload-select" type="file" accept=".jpg,.jpeg,.png"/></a>
						</div>
					</div>
			</div>
					
			</div>
			
			<!-- ENDEREÇO -->
			
			<div  class="well well-small">
				
				<div class="row">
									
					<div class="col-sm-6  form-group" th:classappend="${#fields.hasErrors('endereco.logradouro')} ? has-error">
						<label for="logradouro" class="control-label">Logradouro</label>
						<input id="logradouro" type="text" class="form-control" th:field="*{endereco.logradouro}"/>
					</div>
				</div>
				
				<div class="row">
									
					<div class="col-sm-6  form-group" th:classappend="${#fields.hasErrors('endereco.complemento')} ? has-error">
						<label for="complemento" class="control-label">Complemento</label>
						<input id="complemento" type="text" class="form-control" th:field="*{endereco.complemento}"/>
					</div>
				</div>
	
				<div class="row">
				
					<div class= "col-sm-3 form-group" th:classappend="${#fields.hasErrors('endereco.numero')} ? has-error">
						<label for="numeroImovel" class="control-label">Número do imóvel</label>
						<input id="numeroImovel" type="text" class="form-control js-inteiro " th:field="*{endereco.numero}"></input>
					</div>
					
					<div class= "col-sm-3 form-group" th:classappend="${#fields.hasErrors('endereco.cep')} ? has-error">
						<label for="cep" class="control-label">CEP</label>
						<input id="cep" type="text" class="form-control jsmask-cep" th:field="*{endereco.cep}"></input>
					</div>
					
				</div>	
					
				<div class="row">	
					<div class= "col-sm-3 form-group">
						<label for="bairro">Bairro</label>
						<select id="bairro" class="form-control" th:field="*{endereco.bairro}">
							<option th:each="bairro : ${bairros}" th:value="${bairro.codigo}" th:text="${bairro.nomeBairro}" class="form-control"></option>
						</select>
					</div>
					
					<div class= "col-sm-3 form-group">
						<label for="municipio">Município</label>
						<select id="municipio" class="form-control" th:field="*{endereco.bairro.municipio}">
							<option th:each="municipio : ${municipios}" th:value="${municipio.codigo}" th:text="${municipio.nomeMunicipio}" class="form-control"></option>
						</select>
					</div>
					
				</div>
				
			</div>	
			
				<div class="form-group">
					<button class="btn  btn-primary" type="submit">Salvar</button>
				</div>
		
			</form>
		</div>
		
<!-- 		<div th:replace="modal/modalProprietario :: modalProprietario"></div> -->
<!-- 		<div th:replace="modal/modalEndereco :: modalEndereco"></div> -->
	</section>
	
	<th:block layout:fragment="javascript-extra"> 
	
		<script th:src="@{/javascripts/vendors/uikit.min.js}"></script>
		<script th:src="@{/javascripts/vendors/upload.min.js}"></script>
		
		<script>
			$(function() {
				var settings = {
						type: 'json',
						filelimit: 1,
						allow: '*.(jpg|jpeg|png)',
						action: '/scbastosweb/fotos',
						complete: function(resposta) {
							$('input[name=foto]').val(resposta.nome);
							$('input[name=contentType]').val(resposta.contentType);
						}
				};
				
				UIkit.uploadSelect($('#upload-select'), settings);
				UIkit.uploadDrop($('#upload-drop'), settings);
			});
		</script>
		
	</th:block>

</body>
</html>